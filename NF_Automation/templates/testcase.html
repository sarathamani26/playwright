<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      justify-content: space-between;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run {-->
<!--      background-color: #28a745;-->
<!--    }-->

<!--    .btn-run:hover {-->
<!--      background-color: #218838;-->
<!--    }-->

<!--    .btn-refresh {-->
<!--      background-color: #007bff;-->
<!--    }-->

<!--    .btn-refresh:hover {-->
<!--      background-color: #0056b3;-->
<!--    }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    #scenario-table th:nth-child(1), #scenario-table td:nth-child(1) {-->
<!--      width: 18%;-->
<!--    }-->

<!--    #scenario-table th:nth-child(2), #scenario-table td:nth-child(2) {-->
<!--      width: 36%;-->
<!--    }-->

<!--    #scenario-table th:nth-child(3), #scenario-table td:nth-child(3),-->
<!--    #scenario-table th:nth-child(4), #scenario-table td:nth-child(4),-->
<!--    #scenario-table th:nth-child(5), #scenario-table td:nth-child(5) {-->
<!--      width: 15%;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->

<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" onclick="fetchScenarioTable()">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->

<!--    function fetchTestcaseCodes() {-->
<!--      const clientname = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const environment = environmentSelect.value;-->
<!--      if (clientname && module && environment) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${clientname}&module=${module}&environment=${environment}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(tc => {-->
<!--            const option = document.createElement('option');-->
<!--            option.value = tc;-->
<!--            option.textContent = tc;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--          tableContainer.style.display = "none";-->
<!--          tableBody.innerHTML = "";-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    function fetchScenarioTable() {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      if (!testcasecode) return;-->
<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${testcasecode}`)-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          const scenarios = data.Testcase_scnarios || [];-->
<!--          tableBody.innerHTML = "";-->
<!--          scenarios.forEach(scenario => {-->
<!--            const row = document.createElement("tr");-->
<!--            row.innerHTML = `-->
<!--              <td>${testcasecode}</td>-->
<!--              <td>${scenario}</td>-->
<!--              <td>Pending</td>-->
<!--              <td>Not Started</td>-->
<!--              <td></td>-->
<!--            `;-->
<!--            tableBody.appendChild(row);-->
<!--          });-->
<!--          tableContainer.style.display = "block";-->
<!--        });-->
<!--    }-->

<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const clientname = clientSelect.value;-->
<!--      if (!testcasecode || !clientname) {-->
<!--        alert("Please select both Client and Testcase Code");-->
<!--        return;-->
<!--      }-->
<!--      Array.from(tableBody.children).forEach(row => {-->
<!--        row.cells[2].innerHTML = `<div class='spinner'></div>`;-->
<!--        row.cells[3].innerHTML = `<div class='spinner'></div>`;-->
<!--        row.cells[4].innerHTML = `<div class='spinner'></div>`;-->
<!--      });-->
<!--      fetch(`/nfserv/automation_runprocess?Testcasecode=${encodeURIComponent(testcasecode)}&clientname=${encodeURIComponent(clientname)}`, {-->
<!--        method: "POST",-->
<!--        headers: { "X-CSRFToken": getCookie("csrftoken") },-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(data => {-->
<!--        Array.from(tableBody.children).forEach(row => {-->
<!--          row.cells[2].innerHTML = data.success ? "✅ Done" : "❌ Failed";-->
<!--          row.cells[3].innerHTML = data.success ? "✅ Completed" : "❌ Error";-->
<!--          row.cells[4].innerHTML = "";-->
<!--        });-->
<!--      })-->
<!--      .catch(() => {-->
<!--        Array.from(tableBody.children).forEach(row => {-->
<!--          row.cells[2].innerHTML = "❌ Error";-->
<!--          row.cells[3].innerHTML = "❌ Error";-->
<!--          row.cells[4].innerHTML = "";-->
<!--        });-->
<!--      });-->
<!--    });-->

<!--    function getCookie(name) {-->
<!--      let cookieValue = null;-->
<!--      if (document.cookie && document.cookie !== "") {-->
<!--        const cookies = document.cookie.split(";");-->
<!--        for (let i = 0; i < cookies.length; i++) {-->
<!--          const cookie = cookies[i].trim();-->
<!--          if (cookie.startsWith(name + "=")) {-->
<!--            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));-->
<!--            break;-->
<!--          }-->
<!--        }-->
<!--      }-->
<!--      return cookieValue;-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    testcaseSelect.addEventListener("change", fetchScenarioTable);-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->



<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      justify-content: space-between;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run {-->
<!--      background-color: #28a745;-->
<!--    }-->

<!--    .btn-run:hover {-->
<!--      background-color: #218838;-->
<!--    }-->

<!--    .btn-refresh {-->
<!--      background-color: #007bff;-->
<!--    }-->

<!--    .btn-refresh:hover {-->
<!--      background-color: #0056b3;-->
<!--    }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    #scenario-table th:nth-child(1), #scenario-table td:nth-child(1) {-->
<!--      width: 18%;-->
<!--    }-->

<!--    #scenario-table th:nth-child(2), #scenario-table td:nth-child(2) {-->
<!--      width: 36%;-->
<!--    }-->

<!--    #scenario-table th:nth-child(3), #scenario-table td:nth-child(3),-->
<!--    #scenario-table th:nth-child(4), #scenario-table td:nth-child(4),-->
<!--    #scenario-table th:nth-child(5), #scenario-table td:nth-child(5) {-->
<!--      width: 15%;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->

<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" onclick="fetchScenarioTable()">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->

<!--    function fetchTestcaseCodes() {-->
<!--      const clientname = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const environment = environmentSelect.value;-->
<!--      if (clientname && module && environment) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${clientname}&module=${module}&environment=${environment}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(tc => {-->
<!--            const option = document.createElement('option');-->
<!--            option.value = tc;-->
<!--            option.textContent = tc;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--          tableContainer.style.display = "none";-->
<!--          tableBody.innerHTML = "";-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    function fetchScenarioTable() {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      if (!testcasecode) return;-->
<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${testcasecode}`)-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          const scenarios = data.Testcase_scnarios || [];-->
<!--          tableBody.innerHTML = "";-->
<!--          scenarios.forEach(scenario => {-->
<!--            const row = document.createElement("tr");-->
<!--            row.innerHTML = `-->
<!--              <td>${testcasecode}</td>-->
<!--              <td>${scenario}</td>-->
<!--              <td>Pending</td>-->
<!--              <td>Not Started</td>-->
<!--              <td></td>-->
<!--            `;-->
<!--            tableBody.appendChild(row);-->
<!--          });-->
<!--          tableContainer.style.display = "block";-->
<!--        });-->
<!--    }-->

<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const clientname = clientSelect.value;-->
<!--      if (!testcasecode || !clientname) {-->
<!--        alert("Please select both Client and Testcase Code");-->
<!--        return;-->
<!--      }-->

<!--      Array.from(tableBody.children).forEach(row => {-->
<!--        row.cells[2].innerHTML = `<div class='spinner'></div>`;-->
<!--        row.cells[3].innerHTML = `<div class='spinner'></div>`;-->
<!--        row.cells[4].innerHTML = `<div class='spinner'></div>`;-->
<!--      });-->

<!--      fetch(`/nfserv/automation_runprocess?Testcasecode=${encodeURIComponent(testcasecode)}&clientname=${encodeURIComponent(clientname)}`, {-->
<!--        method: "POST",-->
<!--        headers: { "X-CSRFToken": getCookie("csrftoken") },-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(data => {-->
<!--        const test_id = data.test_id;-->
<!--        fetch(`/nfserv/run_process_summary?id=${test_id}`, {-->
<!--          method: "POST"-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(summary => {-->
<!--          const implementStatus = summary.Testcase_code || "N/A";-->
<!--          const processStatus = summary.status || "N/A";-->
<!--          Array.from(tableBody.children).forEach(row => {-->
<!--            row.cells[2].innerHTML = implementStatus.includes("Done") ? "✅ " + implementStatus : "❌ " + implementStatus;-->
<!--            row.cells[3].innerHTML = processStatus.includes("Completed") ? "✅ " + processStatus : "❌ " + processStatus;-->
<!--            row.cells[4].innerHTML = "";-->
<!--          });-->
<!--        });-->
<!--      })-->
<!--      .catch(() => {-->
<!--        Array.from(tableBody.children).forEach(row => {-->
<!--          row.cells[2].innerHTML = "❌ Error";-->
<!--          row.cells[3].innerHTML = "❌ Error";-->
<!--          row.cells[4].innerHTML = "";-->
<!--        });-->
<!--      });-->
<!--    });-->

<!--    function getCookie(name) {-->
<!--      let cookieValue = null;-->
<!--      if (document.cookie && document.cookie !== "") {-->
<!--        const cookies = document.cookie.split(";");-->
<!--        for (let i = 0; i < cookies.length; i++) {-->
<!--          const cookie = cookies[i].trim();-->
<!--          if (cookie.startsWith(name + "=")) {-->
<!--            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));-->
<!--            break;-->
<!--          }-->
<!--        }-->
<!--      }-->
<!--      return cookieValue;-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    testcaseSelect.addEventListener("change", fetchScenarioTable);-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->
<!--&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      justify-content: space-between;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run {-->
<!--      background-color: #28a745;-->
<!--    }-->

<!--    .btn-run:hover {-->
<!--      background-color: #218838;-->
<!--    }-->

<!--    .btn-refresh {-->
<!--      background-color: #007bff;-->
<!--    }-->

<!--    .btn-refresh:hover {-->
<!--      background-color: #0056b3;-->
<!--    }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    #scenario-table th:nth-child(1), #scenario-table td:nth-child(1) {-->
<!--      width: 18%;-->
<!--    }-->

<!--    #scenario-table th:nth-child(2), #scenario-table td:nth-child(2) {-->
<!--      width: 36%;-->
<!--    }-->

<!--    #scenario-table th:nth-child(3), #scenario-table td:nth-child(3),-->
<!--    #scenario-table th:nth-child(4), #scenario-table td:nth-child(4),-->
<!--    #scenario-table th:nth-child(5), #scenario-table td:nth-child(5) {-->
<!--      width: 15%;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->

<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" onclick="fetchScenarioTable()">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    let latestTestId = null;-->

<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->

<!--    function fetchTestcaseCodes() {-->
<!--      const clientname = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const environment = environmentSelect.value;-->
<!--      if (clientname && module && environment) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${clientname}&module=${module}&environment=${environment}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(tc => {-->
<!--            const option = document.createElement('option');-->
<!--            option.value = tc;-->
<!--            option.textContent = tc;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--          tableContainer.style.display = "none";-->
<!--          tableBody.innerHTML = "";-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    function fetchScenarioTable() {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      if (!testcasecode) return;-->
<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${testcasecode}`)-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          const scenarios = data.Testcase_scnarios || [];-->
<!--          tableBody.innerHTML = "";-->
<!--          scenarios.forEach(scenario => {-->
<!--            const row = document.createElement("tr");-->
<!--            row.innerHTML = `-->
<!--              <td>${testcasecode}</td>-->
<!--              <td>${scenario}</td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--            `;-->
<!--            tableBody.appendChild(row);-->
<!--          });-->
<!--          tableContainer.style.display = "block";-->

<!--          if (latestTestId) {-->
<!--            fetch(`/nfserv/run_process_summary?id=${latestTestId}`, { method: "POST" })-->
<!--              .then(res => res.json())-->
<!--              .then(summary => {-->
<!--                const implementStatus = summary.Testcase_code || "N/A";-->
<!--                const processStatus = summary.status || "N/A";-->
<!--                Array.from(tableBody.children).forEach(row => {-->
<!--                  row.cells[2].innerHTML = implementStatus.includes("Done") ? "✅ " + implementStatus : "❌ " + implementStatus;-->
<!--                  row.cells[3].innerHTML = processStatus.includes("Completed") ? "✅ " + processStatus : "❌ " + processStatus;-->
<!--                  row.cells[4].innerHTML = "";-->
<!--                });-->
<!--              })-->
<!--              .catch(() => {-->
<!--                Array.from(tableBody.children).forEach(row => {-->
<!--                  row.cells[2].innerHTML = "❌ Error";-->
<!--                  row.cells[3].innerHTML = "❌ Error";-->
<!--                  row.cells[4].innerHTML = "";-->
<!--                });-->
<!--              });-->
<!--          }-->
<!--        });-->
<!--    }-->

<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const clientname = clientSelect.value;-->
<!--      if (!testcasecode || !clientname) {-->
<!--        alert("Please select both Client and Testcase Code");-->
<!--        return;-->
<!--      }-->

<!--      Array.from(tableBody.children).forEach(row => {-->
<!--        row.cells[2].innerHTML = `<div class='spinner'></div>`;-->
<!--        row.cells[3].innerHTML = `<div class='spinner'></div>`;-->
<!--        row.cells[4].innerHTML = `<div class='spinner'></div>`;-->
<!--      });-->

<!--      fetch(`/nfserv/automation_runprocess?Testcasecode=${encodeURIComponent(testcasecode)}&clientname=${encodeURIComponent(clientname)}`, {-->
<!--        method: "POST",-->
<!--        headers: { "X-CSRFToken": getCookie("csrftoken") },-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(data => {-->
<!--        if (Array.isArray(data) && data.length > 0 && data[0].key) {-->
<!--          Swal.fire({-->
<!--            toast: true,-->
<!--            icon: 'success',-->
<!--            title: data[0].key,-->
<!--            position: 'top-end',-->
<!--            showConfirmButton: false,-->
<!--            timer: 2000,-->
<!--            timerProgressBar: true-->
<!--          });-->
<!--        }-->

<!--        latestTestId = data.test_id;-->
<!--        if (!latestTestId) return;-->

<!--        fetch(`/nfserv/run_process_summary?id=${latestTestId}`, {-->
<!--          method: "POST"-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(summary => {-->
<!--          const implementStatus = summary.Testcase_code || "N/A";-->
<!--          const processStatus = summary.status || "N/A";-->
<!--          Array.from(tableBody.children).forEach(row => {-->
<!--            row.cells[2].innerHTML = implementStatus.includes("Done") ? "✅ " + implementStatus : "❌ " + implementStatus;-->
<!--            row.cells[3].innerHTML = processStatus.includes("Completed") ? "✅ " + processStatus : "❌ " + processStatus;-->
<!--            row.cells[4].innerHTML = "";-->
<!--          });-->
<!--        });-->
<!--      })-->
<!--      .catch(() => {-->
<!--        Array.from(tableBody.children).forEach(row => {-->
<!--          row.cells[2].innerHTML = "❌ Error";-->
<!--          row.cells[3].innerHTML = "❌ Error";-->
<!--          row.cells[4].innerHTML = "";-->
<!--        });-->
<!--      });-->
<!--    });-->

<!--    function getCookie(name) {-->
<!--      let cookieValue = null;-->
<!--      if (document.cookie && document.cookie !== "") {-->
<!--        const cookies = document.cookie.split(";");-->
<!--        for (let i = 0; i < cookies.length; i++) {-->
<!--          const cookie = cookies[i].trim();-->
<!--          if (cookie.startsWith(name + "=")) {-->
<!--            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));-->
<!--            break;-->
<!--          }-->
<!--        }-->
<!--      }-->
<!--      return cookieValue;-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    testcaseSelect.addEventListener("change", fetchScenarioTable);-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->






<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      justify-content: space-between;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run {-->
<!--      background-color: #28a745;-->
<!--    }-->

<!--    .btn-run:hover {-->
<!--      background-color: #218838;-->
<!--    }-->

<!--    .btn-refresh {-->
<!--      background-color: #007bff;-->
<!--    }-->

<!--    .btn-refresh:hover {-->
<!--      background-color: #0056b3;-->
<!--    }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->

<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" id="refresh-icon">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    let latestTestId = null;-->

<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->

<!--    function fetchTestcaseCodes() {-->
<!--      const clientname = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const environment = environmentSelect.value;-->
<!--      if (clientname && module && environment) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${clientname}&module=${module}&environment=${environment}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(tc => {-->
<!--            const option = document.createElement('option');-->
<!--            option.value = tc;-->
<!--            option.textContent = tc;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    function loadScenarioSummary(testcasecode) {-->
<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${encodeURIComponent(testcasecode)}`)-->
<!--    .then(res => res.json())-->
<!--    .then(data => {-->
<!--      if (!Array.isArray(data)) {-->
<!--        // Handle error or empty-->
<!--        tableBody.innerHTML = '<tr><td colspan="5">No scenarios found or error occurred.</td></tr>';-->
<!--        tableContainer.style.display = "block";-->
<!--        return;-->
<!--      }-->

<!--      tableBody.innerHTML = "";-->

<!--      data.forEach(item => {-->
<!--        const row = document.createElement("tr");-->
<!--        row.innerHTML = `-->
<!--          <td>${item.Testcase_code || testcasecode}</td>-->
<!--          <td>${item.Test_scnarios || ''}</td>-->
<!--          <td><div class="spinner"></div></td>-->
<!--          <td><div class="spinner"></div></td>-->
<!--          <td><div class="spinner"></div></td>-->
<!--        `;-->
<!--        tableBody.appendChild(row);-->
<!--      });-->

<!--      tableContainer.style.display = "block";-->
<!--    })-->
<!--    .catch(() => {-->
<!--      tableBody.innerHTML = '<tr><td colspan="5">Error loading scenarios.</td></tr>';-->
<!--      tableContainer.style.display = "block";-->
<!--    });-->
<!--    }-->

<!--    function refreshStatus() {-->
<!--      if (!latestTestId) {-->
<!--        Swal.fire("Missing Test ID", "Please click RUN first to trigger test ID.", "warning");-->
<!--        return;-->
<!--      }-->

<!--      Swal.fire({-->
<!--        title: 'Checking Status...',-->
<!--        html: '<div class="spinner" style="margin: 20px auto;"></div><p>Click refresh icon to view status<br>This will auto-update in 20 seconds</p>',-->
<!--        allowOutsideClick: false,-->
<!--        showConfirmButton: false,-->
<!--        timer: 20000,-->
<!--        timerProgressBar: true,-->
<!--        willClose: () => {-->
<!--          fetch(`/nfserv/run_process_summary?id=${latestTestId}`, { method: "POST" })-->
<!--            .then(res => res.json())-->
<!--            .then(summary => {-->
<!--              const implementStatus = summary.Testcase_code || "N/A";-->
<!--              const processStatus = summary.status || "N/A";-->
<!--              Array.from(tableBody.children).forEach(row => {-->
<!--                row.cells[2].innerHTML = implementStatus.includes("Done") ? "✅ " + implementStatus : "❌ " + implementStatus;-->
<!--                row.cells[3].innerHTML = processStatus.includes("Completed") ? "✅ " + processStatus : "❌ " + processStatus;-->
<!--                row.cells[4].innerHTML = "";-->
<!--              });-->
<!--            });-->
<!--        }-->
<!--      });-->
<!--    }-->

<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const clientname = clientSelect.value;-->
<!--      if (!testcasecode || !clientname) {-->
<!--        alert("Please select both Client and Testcase Code");-->
<!--        return;-->
<!--      }-->

<!--      loadScenarioSummary(testcasecode);-->

<!--      fetch(`/nfserv/automation_runprocess?Testcasecode=${encodeURIComponent(testcasecode)}&clientname=${encodeURIComponent(clientname)}`, {-->
<!--        method: "POST",-->
<!--        headers: { "X-CSRFToken": getCookie("csrftoken") },-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(data => {-->
<!--        if (Array.isArray(data) && data.length > 0 && data[0].key) {-->
<!--          Swal.fire({-->
<!--            toast: true,-->
<!--            icon: 'success',-->
<!--            title: data[0].key,-->
<!--            position: 'top-end',-->
<!--            showConfirmButton: false,-->
<!--            timer: 2000,-->
<!--            timerProgressBar: true-->
<!--          });-->
<!--        }-->

<!--        latestTestId = data.test_id;-->
<!--      });-->
<!--    });-->

<!--    function getCookie(name) {-->
<!--      let cookieValue = null;-->
<!--      if (document.cookie && document.cookie !== "") {-->
<!--        const cookies = document.cookie.split(";");-->
<!--        for (let i = 0; i < cookies.length; i++) {-->
<!--          const cookie = cookies[i].trim();-->
<!--          if (cookie.startsWith(name + "=")) {-->
<!--            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));-->
<!--            break;-->
<!--          }-->
<!--        }-->
<!--      }-->
<!--      return cookieValue;-->
<!--    }-->

<!--    // Events-->
<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    testcaseSelect.addEventListener("change", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      if (testcasecode) {-->
<!--        loadScenarioSummary(testcasecode);-->
<!--      }-->
<!--    });-->

<!--    // ✅ Refresh icon click handler-->
<!--    document.getElementById("refresh-icon").addEventListener("click", refreshStatus);-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->




<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      justify-content: space-between;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run {-->
<!--      background-color: #28a745;-->
<!--    }-->

<!--    .btn-run:hover {-->
<!--      background-color: #218838;-->
<!--    }-->

<!--    .btn-refresh {-->
<!--      background-color: #007bff;-->
<!--    }-->

<!--    .btn-refresh:hover {-->
<!--      background-color: #0056b3;-->
<!--    }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->

<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" id="refresh-icon">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    let latestTestId = null;-->

<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->

<!--    function fetchTestcaseCodes() {-->
<!--      const clientname = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const environment = environmentSelect.value;-->
<!--      if (clientname && module && environment) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${clientname}&module=${module}&environment=${environment}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(tc => {-->
<!--            const option = document.createElement('option');-->
<!--            option.value = tc;-->
<!--            option.textContent = tc;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    function loadScenarioSummary(testcasecode, callback = null) {-->
<!--      fetch(`/nfserv/return_test_scn_name`, {-->
<!--        method: 'POST',-->
<!--        headers: { 'Content-Type': 'application/json' },-->
<!--        body: JSON.stringify({ Testcasecode: testcasecode })-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(data => {-->
<!--        if (!Array.isArray(data)) {-->
<!--          tableBody.innerHTML = '<tr><td colspan="5">No scenarios found or error occurred.</td></tr>';-->
<!--          tableContainer.style.display = "block";-->
<!--          return;-->
<!--        }-->

<!--        tableBody.innerHTML = "";-->

<!--        data.forEach(item => {-->
<!--          const row = document.createElement("tr");-->
<!--          row.setAttribute("data-scenario", item.Test_scnarios); // to match later-->
<!--          row.innerHTML = `-->
<!--            <td>${item["Testcase_code"]}</td>-->
<!--            <td>${item["Test_scnarios"]}</td>-->
<!--            <td><div class="spinner"></div></td>-->
<!--            <td><div class="spinner"></div></td>-->
<!--            <td><div class="spinner"></div></td>-->
<!--          `;-->
<!--          tableBody.appendChild(row);-->
<!--        });-->

<!--        tableContainer.style.display = "block";-->

<!--        if (callback) callback();-->
<!--      })-->
<!--      .catch(() => {-->
<!--        tableBody.innerHTML = '<tr><td colspan="5">Error loading scenarios.</td></tr>';-->
<!--        tableContainer.style.display = "block";-->
<!--      });-->
<!--    }-->

<!--    function refreshStatus() {-->
<!--      if (!latestTestId) {-->
<!--        Swal.fire("Missing Test ID", "Please click RUN first to trigger test ID.", "warning");-->
<!--        return;-->
<!--      }-->

<!--      Swal.fire({-->
<!--        title: 'Checking Status...',-->
<!--        html: '<div class="spinner" style="margin: 20px auto;"></div><p>Click refresh icon to view status<br>This will auto-update in 20 seconds</p>',-->
<!--        allowOutsideClick: false,-->
<!--        showConfirmButton: false,-->
<!--        timer: 20000,-->
<!--        timerProgressBar: true,-->
<!--        willClose: () => {-->
<!--          fetch(`/nfserv/run_process_summary/${latestTestId}`, {-->
<!--            method: "POST"-->
<!--          })-->
<!--          .then(res => res.json())-->
<!--          .then(summaries => {-->
<!--            if (!Array.isArray(summaries)) return;-->
<!--            summaries.forEach(summary => {-->
<!--              const scenarioRow = document.querySelector(`tr[data-scenario="${summary.Test_scnarios}"]`);-->
<!--              if (scenarioRow) {-->
<!--                scenarioRow.cells[2].innerHTML = summary.Testcase_code.includes("Done") ? "✅ " + summary.Testcase_code : "❌ " + summary.Testcase_code;-->
<!--                scenarioRow.cells[3].innerHTML = summary.status.includes("Completed") ? "✅ " + summary.status : "❌ " + summary.status;-->
<!--                scenarioRow.cells[4].innerHTML = '';-->
<!--              }-->
<!--            });-->
<!--          });-->
<!--        }-->
<!--      });-->
<!--    }-->

<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const clientname = clientSelect.value;-->
<!--      if (!testcasecode || !clientname) {-->
<!--        alert("Please select both Client and Testcase Code");-->
<!--        return;-->
<!--      }-->

<!--      loadScenarioSummary(testcasecode, () => {-->
<!--        fetch(`/nfserv/automation_runprocess?Testcasecode=${encodeURIComponent(testcasecode)}&clientname=${encodeURIComponent(clientname)}`, {-->
<!--          method: "POST",-->
<!--          headers: { "X-CSRFToken": getCookie("csrftoken") },-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          if (Array.isArray(data) && data.length > 0 && data[0].key) {-->
<!--            Swal.fire({-->
<!--              toast: true,-->
<!--              icon: 'success',-->
<!--              title: data[0].key,-->
<!--              position: 'top-end',-->
<!--              showConfirmButton: false,-->
<!--              timer: 2000,-->
<!--              timerProgressBar: true-->
<!--            });-->
<!--          }-->
<!--          latestTestId = data.test_id;-->
<!--        });-->
<!--      });-->
<!--    });-->

<!--    function getCookie(name) {-->
<!--      let cookieValue = null;-->
<!--      if (document.cookie && document.cookie !== "") {-->
<!--        const cookies = document.cookie.split(";");-->
<!--        for (let i = 0; i < cookies.length; i++) {-->
<!--          const cookie = cookies[i].trim();-->
<!--          if (cookie.startsWith(name + "=")) {-->
<!--            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));-->
<!--            break;-->
<!--          }-->
<!--        }-->
<!--      }-->
<!--      return cookieValue;-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->

<!--    testcaseSelect.addEventListener("change", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      if (testcasecode) {-->
<!--        loadScenarioSummary(testcasecode);-->
<!--      }-->
<!--    });-->

<!--    document.getElementById("refresh-icon").addEventListener("click", refreshStatus);-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->
<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->
<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->
<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->
<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->
<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->
<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->
<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->
<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->
<!--    .btn-run { background-color: #28a745; }-->
<!--    .btn-run:hover { background-color: #218838; }-->
<!--    .btn-refresh { background-color: #007bff; }-->
<!--    .btn-refresh:hover { background-color: #0056b3; }-->
<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->
<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->
<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->
<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->
<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->
<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->
<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->
<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->
<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->
<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" id="refresh-icon">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->
<!--    const refreshIcon = document.getElementById("refresh-icon");-->

<!--    // Fetch testcase codes for dropdown when Client, Module, Environment are selected-->
<!--    function fetchTestcaseCodes() {-->
<!--      const clientname = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const environment = environmentSelect.value;-->

<!--      if (clientname && module && environment) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${clientname}&module=${module}&environment=${environment}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(tc => {-->
<!--            const option = document.createElement('option');-->
<!--            option.value = tc;-->
<!--            option.textContent = tc;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--        })-->
<!--        .catch(err => {-->
<!--          console.error('Error fetching testcase codes:', err);-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->

<!--    // Load scenario summary from backend and populate the table-->
<!--    function loadScenarioSummary(testcasecode, callback = null) {-->
<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${encodeURIComponent(testcasecode)}`, {-->
<!--        method: 'GET'-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(result => {-->
<!--        const data = result.data || [];-->

<!--        console.log("SCENARIO RESPONSE:", data);-->

<!--        tableBody.innerHTML = "";-->

<!--        if (!Array.isArray(data) || data.length === 0) {-->
<!--          tableBody.innerHTML = `<tr><td colspan="5">No Data Available</td></tr>`;-->
<!--          tableContainer.style.display = "block";-->
<!--          return;-->
<!--        }-->

<!--        data.forEach(item => {-->
<!--          const row = document.createElement("tr");-->
<!--          row.setAttribute("data-scenario", item.Test_scnarios);-->
<!--          row.innerHTML = `-->
<!--            <td>${item.Testcase_code}</td>-->
<!--            <td>${item.Test_scnarios}</td>-->
<!--            <td><div class="spinner"></div></td>-->
<!--            <td><div class="spinner"></div></td>-->
<!--            <td><div class="spinner"></div></td>-->
<!--          `;-->
<!--          tableBody.appendChild(row);-->
<!--        });-->

<!--        tableContainer.style.display = "block";-->
<!--        if (callback) callback();-->
<!--      })-->
<!--      .catch(err => {-->
<!--        console.error("Error fetching scenarios:", err);-->
<!--        tableBody.innerHTML = '<tr><td colspan="5">Error loading scenarios.</td></tr>';-->
<!--        tableContainer.style.display = "block";-->
<!--      });-->
<!--    }-->

<!--    // When Testcase dropdown changes, load scenarios automatically-->
<!--    testcaseSelect.addEventListener("change", () => {-->
<!--      const selectedCode = testcaseSelect.value;-->
<!--      if (selectedCode) {-->
<!--        loadScenarioSummary(selectedCode);-->
<!--      }-->
<!--    });-->

<!--    // Refresh icon reloads the current scenario summary if testcase selected-->
<!--    refreshIcon.addEventListener("click", () => {-->
<!--      const selectedCode = testcaseSelect.value;-->
<!--      if (selectedCode) {-->
<!--        loadScenarioSummary(selectedCode);-->
<!--      }-->
<!--    });-->

<!--    // Optional: RUN button can also trigger scenario load (customize as needed)-->
<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const selectedCode = testcaseSelect.value;-->
<!--      if (!selectedCode) {-->
<!--        Swal.fire({-->
<!--          icon: 'warning',-->
<!--          title: 'Please select a Testcase Code first'-->
<!--        });-->
<!--        return;-->
<!--      }-->
<!--      // You can add your RUN logic here-->
<!--      loadScenarioSummary(selectedCode);-->
<!--    });-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run { background-color: #28a745; }-->
<!--    .btn-run:hover { background-color: #218838; }-->

<!--    .btn-refresh { background-color: #007bff; }-->
<!--    .btn-refresh:hover { background-color: #0056b3; }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->

<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->
<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" id="refresh-icon">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->
<!--    const refreshIcon = document.getElementById("refresh-icon");-->

<!--    // Fetch testcase codes-->
<!--    function fetchTestcaseCodes() {-->
<!--      const client = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const env = environmentSelect.value;-->

<!--      if (client && module && env) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${client}&module=${module}&environment=${env}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(code => {-->
<!--            const option = document.createElement("option");-->
<!--            option.value = code;-->
<!--            option.textContent = code;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->

<!--    // Load summary when testcase is selected-->
<!--    testcaseSelect.addEventListener("change", () => {-->
<!--      const selectedCode = testcaseSelect.value;-->
<!--      if (selectedCode) loadScenarioSummary(selectedCode);-->
<!--    });-->

<!--    function loadScenarioSummary(testcode) {-->
<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${testcode}`)-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          tableBody.innerHTML = "";-->
<!--          const scenarios = data.data || [];-->

<!--          if (!Array.isArray(scenarios) || scenarios.length === 0) {-->
<!--            tableBody.innerHTML = `<tr><td colspan="5">No Data</td></tr>`;-->
<!--            tableContainer.style.display = "block";-->
<!--            return;-->
<!--          }-->

<!--          scenarios.forEach(item => {-->
<!--            const row = document.createElement("tr");-->
<!--            row.setAttribute("data-id", item.id);-->
<!--            row.innerHTML = `-->
<!--              <td>${item.Testcase_code}</td>-->
<!--              <td>${item.Test_scnarios}</td>-->
<!--              <td>${item.status}</td>-->
<!--              <td>${item.test_implement_status}</td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--            `;-->
<!--            tableBody.appendChild(row);-->
<!--          });-->

<!--          tableContainer.style.display = "block";-->
<!--        });-->
<!--    }-->

<!--    // RUN button-->
<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const client = clientSelect.value;-->

<!--      if (!testcasecode || !client) {-->
<!--        Swal.fire({ icon: 'warning', title: 'Please select Testcase & Client' });-->
<!--        return;-->
<!--      }-->

<!--      Swal.fire({-->
<!--        toast: true,-->
<!--        position: 'top-end',-->
<!--        icon: 'success',-->
<!--        title: 'Automation Starts',-->
<!--        showConfirmButton: false,-->
<!--        timer: 2000-->
<!--      });-->

<!--      fetch(`/nfserv/automation_runprocess?Testcasecode=${testcasecode}&clientname=${client}`, {-->
<!--        method: 'POST',-->
<!--        headers: { 'Content-Type': 'application/json' }-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(() => {-->
<!--        loadScenarioSummary(testcasecode);-->
<!--      });-->
<!--    });-->

<!--    // 🔁 Refresh icon logic: fetch summary and post patch-->
<!--    refreshIcon.addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->

<!--      if (!testcasecode) {-->
<!--        Swal.fire({ icon: 'warning', title: 'Please select a Testcase Code' });-->
<!--        return;-->
<!--      }-->

<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${testcasecode}`)-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          const scenarios = data.data || [];-->

<!--          tableBody.innerHTML = "";-->

<!--          scenarios.forEach(item => {-->
<!--            const row = document.createElement("tr");-->
<!--            row.setAttribute("data-id", item.id);-->
<!--            row.innerHTML = `-->
<!--              <td>${item.Testcase_code}</td>-->
<!--              <td>${item.Test_scnarios}</td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--            `;-->
<!--            tableBody.appendChild(row);-->

<!--            fetch(`/nfserv/run_process_summary/${item.id}`, {-->
<!--              method: 'POST',-->
<!--              headers: { 'Content-Type': 'application/json' }-->
<!--            })-->
<!--            .then(res => res.json())-->
<!--            .then(summary => {-->
<!--              row.cells[2].textContent = summary.status || "N/A";-->
<!--              row.cells[3].textContent = summary.process_status || "N/A";-->
<!--              row.cells[4].innerHTML = "";-->
<!--            })-->
<!--            .catch(err => {-->
<!--              console.error("Error:", err);-->
<!--              row.cells[2].textContent = "Error";-->
<!--              row.cells[3].textContent = "Error";-->
<!--              row.cells[4].textContent = "✗";-->
<!--            });-->
<!--          });-->

<!--          tableContainer.style.display = "block";-->
<!--        })-->
<!--        .catch(err => {-->
<!--          console.error("Scenario fetch error:", err);-->
<!--          Swal.fire({ icon: 'error', title: 'Failed to refresh scenarios' });-->
<!--        });-->
<!--    });-->
<!--  </script>-->

<!--</body>-->
<!--</html>-->







<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run { background-color: #28a745; }-->
<!--    .btn-run:hover { background-color: #218838; }-->

<!--    .btn-refresh { background-color: #007bff; }-->
<!--    .btn-refresh:hover { background-color: #0056b3; }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->

<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->
<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" id="refresh-icon">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->
<!--    const refreshIcon = document.getElementById("refresh-icon");-->

<!--    // Fetch testcase codes-->
<!--    function fetchTestcaseCodes() {-->
<!--      const client = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const env = environmentSelect.value;-->

<!--      if (client && module && env) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${client}&module=${module}&environment=${env}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(code => {-->
<!--            const option = document.createElement("option");-->
<!--            option.value = code;-->
<!--            option.textContent = code;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->

<!--    testcaseSelect.addEventListener("change", () => {-->
<!--      const selectedCode = testcaseSelect.value;-->
<!--      if (selectedCode) loadScenarioSummary(selectedCode);-->
<!--    });-->

<!--    function loadScenarioSummary(testcode) {-->
<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${testcode}`)-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          tableBody.innerHTML = "";-->
<!--          const scenarios = data.data || [];-->

<!--          if (!Array.isArray(scenarios) || scenarios.length === 0) {-->
<!--            tableBody.innerHTML = `<tr><td colspan="5">No Data</td></tr>`;-->
<!--            tableContainer.style.display = "block";-->
<!--            return;-->
<!--          }-->

<!--          scenarios.forEach(item => {-->
<!--            const row = document.createElement("tr");-->
<!--            row.setAttribute("data-id", item.id);-->
<!--            row.innerHTML = `-->
<!--              <td>${item.Testcase_code}</td>-->
<!--              <td>${item.Test_scnarios}</td>-->
<!--              <td>${item.status}</td>-->
<!--              <td>${item.test_implement_status}</td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--            `;-->
<!--            tableBody.appendChild(row);-->
<!--          });-->

<!--          tableContainer.style.display = "block";-->
<!--        });-->
<!--    }-->

<!--    // RUN button with testcase_id array-->
<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const client = clientSelect.value;-->

<!--      if (!testcasecode || !client) {-->
<!--        Swal.fire({ icon: 'warning', title: 'Please select Testcase & Client' });-->
<!--        return;-->
<!--      }-->

<!--      const rowIds = Array.from(document.querySelectorAll("#scenario-body tr"))-->
<!--        .map(row => row.getAttribute("data-id"))-->
<!--        .filter(id => id);-->

<!--      const queryParams = new URLSearchParams({-->
<!--        Testcasecode: testcasecode,-->
<!--        clientname: client,-->
<!--        testcase_id: JSON.stringify(rowIds)-->
<!--      });-->

<!--      Swal.fire({-->
<!--        toast: true,-->
<!--        position: 'top-end',-->
<!--        icon: 'success',-->
<!--        title: 'Automation Starts',-->
<!--        showConfirmButton: false,-->
<!--        timer: 2000-->
<!--      });-->

<!--      fetch(`/nfserv/automation_runprocess?${queryParams.toString()}`, {-->
<!--        method: 'POST',-->
<!--        headers: { 'Content-Type': 'application/json' }-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(() => {-->
<!--        loadScenarioSummary(testcasecode);-->
<!--      });-->
<!--    });-->

<!--    // Refresh icon logic-->
<!--    refreshIcon.addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->

<!--      if (!testcasecode) {-->
<!--        Swal.fire({ icon: 'warning', title: 'Please select a Testcase Code' });-->
<!--        return;-->
<!--      }-->

<!--      fetch(`/nfserv/return_test_scn_name?Testcasecode=${testcasecode}`)-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          const scenarios = data.data || [];-->
<!--          tableBody.innerHTML = "";-->

<!--          scenarios.forEach(item => {-->
<!--            const row = document.createElement("tr");-->
<!--            row.setAttribute("data-id", item.id);-->
<!--            row.innerHTML = `-->
<!--              <td>${item.Testcase_code}</td>-->
<!--              <td>${item.Test_scnarios}</td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--              <td><div class="spinner"></div></td>-->
<!--            `;-->
<!--            tableBody.appendChild(row);-->

<!--      fetch(`/nfserv/run_process_summary/${item.id}`, {-->
<!--              method: 'POST',-->
<!--              headers: { 'Content-Type': 'application/json' }-->
<!--            })-->
<!--            .then(res => res.json())-->
<!--            .then(summary => {-->
<!--              row.cells[2].textContent = summary.status || "N/A";-->
<!--              row.cells[3].textContent = summary.process_status || "N/A";-->
<!--              row.cells[4].innerHTML = "";-->
<!--            })-->
<!--            .catch(err => {-->
<!--              console.error("Error:", err);-->
<!--              row.cells[2].textContent = "Error";-->
<!--              row.cells[3].textContent = "Error";-->
<!--              row.cells[4].textContent = "✗";-->
<!--            });-->
<!--          });-->

<!--          tableContainer.style.display = "block";-->
<!--        })-->
<!--        .catch(err => {-->
<!--          console.error("Scenario fetch error:", err);-->
<!--          Swal.fire({ icon: 'error', title: 'Failed to refresh scenarios' });-->
<!--        });-->
<!--    });-->
<!--  </script>-->

<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run { background-color: #28a745; }-->
<!--    .btn-run:hover { background-color: #218838; }-->

<!--    .btn-refresh { background-color: #007bff; }-->
<!--    .btn-refresh:hover { background-color: #0056b3; }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->

<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->
<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" id="refresh-icon">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->
<!--    const refreshIcon = document.getElementById("refresh-icon");-->

<!--    function fetchTestcaseCodes() {-->
<!--      const client = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const env = environmentSelect.value;-->

<!--      if (client && module && env) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${client}&module=${module}&environment=${env}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(code => {-->
<!--            const option = document.createElement("option");-->
<!--            option.value = code;-->
<!--            option.textContent = code;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->

<!--    testcaseSelect.addEventListener("change", () => {-->
<!--      const selectedCode = testcaseSelect.value;-->
<!--      if (selectedCode) {-->
<!--        fetch(`/nfserv/return_test_scn_name?Testcasecode=${selectedCode}`)-->
<!--          .then(res => res.json())-->
<!--          .then(data => {-->
<!--            tableBody.innerHTML = "";-->
<!--            const scenarios = data.data || [];-->

<!--            if (!Array.isArray(scenarios) || scenarios.length === 0) {-->
<!--              tableBody.innerHTML = `<tr><td colspan="5">No Data</td></tr>`;-->
<!--              tableContainer.style.display = "block";-->
<!--              return;-->
<!--            }-->

<!--            scenarios.forEach(item => {-->
<!--              const row = document.createElement("tr");-->
<!--              row.setAttribute("data-id", item.id);-->
<!--              row.innerHTML = `-->
<!--                <td>${item.Testcase_code}</td>-->
<!--                <td>${item.Test_scnarios}</td>-->
<!--                <td>${item.status}</td>-->
<!--                <td>${item.test_implement_status}</td>-->
<!--                <td><div class="spinner"></div></td>-->
<!--              `;-->
<!--              tableBody.appendChild(row);-->
<!--            });-->

<!--            tableContainer.style.display = "block";-->
<!--          });-->
<!--      }-->
<!--    });-->

<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const client = clientSelect.value;-->

<!--      if (!testcasecode || !client) {-->
<!--        Swal.fire({ icon: 'warning', title: 'Please select Testcase & Client' });-->
<!--        return;-->
<!--      }-->

<!--      const rowIds = Array.from(document.querySelectorAll("#scenario-body tr"))-->
<!--        .map(row => row.getAttribute("data-id"))-->
<!--        .filter(id => id);-->

<!--      const queryParams = new URLSearchParams({-->
<!--        Testcasecode: testcasecode,-->
<!--        clientname: client,-->
<!--        testcase_id: JSON.stringify(rowIds)-->
<!--      });-->

<!--      Swal.fire({-->
<!--        toast: true,-->
<!--        position: 'top-end',-->
<!--        icon: 'success',-->
<!--        title: 'Automation Starts',-->
<!--        showConfirmButton: false,-->
<!--        timer: 2000-->
<!--      });-->

<!--      fetch(`/nfserv/automation_runprocess?${queryParams.toString()}`, {-->
<!--        method: 'POST',-->
<!--        headers: { 'Content-Type': 'application/json' }-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(() => {-->
<!--        // Optional: trigger refresh to update statuses-->
<!--        document.getElementById("refresh-icon").click();-->
<!--      });-->
<!--    });-->

<!--    refreshIcon.addEventListener("click", () => {-->
<!--      const rows = Array.from(document.querySelectorAll("#scenario-body tr"));-->
<!--      if (rows.length === 0) {-->
<!--        Swal.fire({ icon: 'info', title: 'No scenarios to refresh' });-->
<!--        return;-->
<!--      }-->

<!--      rows.forEach(row => {-->
<!--        const id = row.getAttribute("data-id");-->
<!--        if (!id) return;-->

<!--        row.cells[2].innerHTML = '<div class="spinner"></div>';-->
<!--        row.cells[3].innerHTML = '<div class="spinner"></div>';-->
<!--        row.cells[4].innerHTML = '<div class="spinner"></div>';-->

<!--        fetch(`/nfserv/run_process_summary/${id}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(summary => {-->
<!--          row.cells[2].textContent = summary.Testcase_code || "N/A";-->
<!--          row.cells[3].textContent = summary.status || "N/A";-->
<!--          row.cells[4].innerHTML = "";-->
<!--        })-->
<!--        .catch(err => {-->
<!--          console.error("Error:", err);-->
<!--          row.cells[2].textContent = "Error";-->
<!--          row.cells[3].textContent = "Error";-->
<!--          row.cells[4].textContent = "✗";-->
<!--        });-->
<!--      });-->
<!--    });-->
<!--  </script>-->

<!--</body>-->
<!--</html>-->




<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Automation Run</title>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #F2F2F2;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--    }-->

<!--    .main-container {-->
<!--      width: 95%;-->
<!--      max-width: 1200px;-->
<!--      margin: 40px auto;-->
<!--      background-color: #fff;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 10px;-->
<!--      padding: 30px;-->
<!--      box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      margin-bottom: 30px;-->
<!--      color: #333;-->
<!--    }-->

<!--    .form-row {-->
<!--      display: flex;-->
<!--      gap: 20px;-->
<!--      flex-wrap: wrap;-->
<!--      margin-bottom: 20px;-->
<!--    }-->

<!--    .form-group {-->
<!--      flex: 1;-->
<!--      min-width: 220px;-->
<!--    }-->

<!--    label {-->
<!--      display: block;-->
<!--      margin-bottom: 8px;-->
<!--      font-weight: bold;-->
<!--      color: #444;-->
<!--    }-->

<!--    select {-->
<!--      width: 100%;-->
<!--      padding: 10px;-->
<!--      border: 1px solid #bbb;-->
<!--      border-radius: 5px;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .button-row {-->
<!--      display: flex;-->
<!--      gap: 15px;-->
<!--      justify-content: flex-start;-->
<!--      margin-top: 20px;-->
<!--    }-->

<!--    .btn-run, .btn-refresh {-->
<!--      padding: 10px 20px;-->
<!--      font-size: 14px;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      cursor: pointer;-->
<!--      color: white;-->
<!--    }-->

<!--    .btn-run { background-color: #28a745; }-->
<!--    .btn-run:hover { background-color: #218838; }-->

<!--    .btn-refresh { background-color: #007bff; }-->
<!--    .btn-refresh:hover { background-color: #0056b3; }-->

<!--    .table-container {-->
<!--      display: none;-->
<!--      margin-top: 40px;-->
<!--      padding: 20px;-->
<!--      background-color: #fafafa;-->
<!--      border: 1px solid #ddd;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);-->
<!--    }-->

<!--    .table-title {-->
<!--      font-size: 20px;-->
<!--      font-weight: bold;-->
<!--      margin-bottom: 15px;-->
<!--      color: #2c3e50;-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      justify-content: space-between;-->
<!--    }-->

<!--    .refresh-icon {-->
<!--      cursor: pointer;-->
<!--      font-size: 18px;-->
<!--      color: #007bff;-->
<!--    }-->

<!--    #scenario-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      background-color: #fff;-->
<!--      font-size: 13px;-->
<!--      table-layout: fixed;-->
<!--    }-->

<!--    #scenario-table thead {-->
<!--      background-color: #f0f0f0;-->
<!--    }-->

<!--    #scenario-table th, #scenario-table td {-->
<!--      padding: 10px;-->
<!--      border: 1px solid #ccc;-->
<!--      text-align: center;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    .spinner {-->
<!--      border: 3px solid #ccc;-->
<!--      border-top: 3px solid #007bff;-->
<!--      border-radius: 50%;-->
<!--      width: 18px;-->
<!--      height: 18px;-->
<!--      animation: spin 1s linear infinite;-->
<!--      margin: auto;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->

<!--  <div class="main-container">-->
<!--    <h2>Automation RUN</h2>-->
<!--    <div class="form-row">-->
<!--      <div class="form-group">-->
<!--        <label for="client">Client Name</label>-->
<!--        <select id="client">-->
<!--          <option value="" disabled selected>Choose the client</option>-->
<!--          <option value="NAC">NAC</option>-->
<!--          <option value="NF">NF</option>-->
<!--          <option value="KVB">KVB</option>-->
<!--          <option value="IB">IB</option>-->
<!--          <option value="WR">WR</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="module">Module</label>-->
<!--        <select id="module">-->
<!--          <option value="" disabled selected>Select module</option>-->
<!--          <option value="Login">Login</option>-->
<!--          <option value="ECF">ECF</option>-->
<!--          <option value="Vendor">Vendor</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="environment">Environment</label>-->
<!--        <select id="environment">-->
<!--          <option value="" disabled selected>Select environment</option>-->
<!--          <option value="DO">DO</option>-->
<!--          <option value="UAT">UAT</option>-->
<!--          <option value="SIT">SIT</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="form-group">-->
<!--        <label for="testcase">Testcase Code</label>-->
<!--        <select id="testcase">-->
<!--          <option value="" disabled selected>Select Testcase Code</option>-->
<!--        </select>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="button-row">-->
<!--      <button class="btn-run">RUN</button>-->
<!--      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="table-container" id="table-container">-->
<!--    <div class="table-title">-->
<!--      Scenario Summary <span class="refresh-icon" id="refresh-icon">&#x21bb;</span>-->
<!--    </div>-->
<!--    <table id="scenario-table">-->
<!--      <thead>-->
<!--        <tr>-->
<!--          <th>Testcase Code</th>-->
<!--          <th>Scenario Name</th>-->
<!--          <th>Test Implement Status</th>-->
<!--          <th>Process Status</th>-->
<!--          <th>Loader</th>-->
<!--        </tr>-->
<!--      </thead>-->
<!--      <tbody id="scenario-body"></tbody>-->
<!--    </table>-->
<!--  </div>-->

<!--  <script>-->
<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->
<!--    const refreshIcon = document.getElementById("refresh-icon");-->

<!--    function fetchTestcaseCodes() {-->
<!--      const client = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const env = environmentSelect.value;-->

<!--      if (client && module && env) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${client}&module=${module}&environment=${env}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(code => {-->
<!--            const option = document.createElement("option");-->
<!--            option.value = code;-->
<!--            option.textContent = code;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->

<!--    testcaseSelect.addEventListener("change", () => {-->
<!--      const selectedCode = testcaseSelect.value;-->
<!--      if (selectedCode) {-->
<!--        fetch(`/nfserv/return_test_scn_name?Testcasecode=${selectedCode}`)-->
<!--          .then(res => res.json())-->
<!--          .then(data => {-->
<!--            tableBody.innerHTML = "";-->
<!--            const scenarios = data.data || [];-->

<!--            if (!Array.isArray(scenarios) || scenarios.length === 0) {-->
<!--              tableBody.innerHTML = `<tr><td colspan="5">No Data</td></tr>`;-->
<!--              tableContainer.style.display = "block";-->
<!--              return;-->
<!--            }-->

<!--            scenarios.forEach(item => {-->
<!--              const row = document.createElement("tr");-->
<!--              row.setAttribute("data-id", item.id);-->
<!--              row.innerHTML = `-->
<!--                <td>${item.Testcase_code}</td>-->
<!--                <td>${item.Test_scnarios}</td>-->
<!--                <td>${item.status}</td>-->
<!--                <td>${item.test_implement_status}</div></td>-->
<!--                <td><div class="spinner"></div></td>-->
<!--              `;-->
<!--              tableBody.appendChild(row);-->
<!--            });-->

<!--            tableContainer.style.display = "block";-->
<!--          });-->
<!--      }-->
<!--    });-->

<!--    document.querySelector(".btn-run").addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const client = clientSelect.value;-->

<!--      if (!testcasecode || !client) {-->
<!--        Swal.fire({ icon: 'warning', title: 'Please select Testcase & Client' });-->
<!--        return;-->
<!--      }-->

<!--      const rowIds = Array.from(document.querySelectorAll("#scenario-body tr"))-->
<!--        .map(row => row.getAttribute("data-id"))-->
<!--        .filter(id => id);-->

<!--      const queryParams = new URLSearchParams({-->
<!--        Testcasecode: testcasecode,-->
<!--        clientname: client,-->
<!--        testcase_id: JSON.stringify(rowIds)-->
<!--      });-->

<!--      Swal.fire({-->
<!--        toast: true,-->
<!--        position: 'top-end',-->
<!--        icon: 'success',-->
<!--        title: 'Automation Starts',-->
<!--        showConfirmButton: false,-->
<!--        timer: 2000-->
<!--      });-->

<!--      fetch(`/nfserv/automation_runprocess?${queryParams.toString()}`, {-->
<!--        method: 'POST',-->
<!--        headers: { 'Content-Type': 'application/json' }-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(() => {-->
<!--        document.getElementById("refresh-icon").click();-->
<!--      });-->
<!--    });-->

<!--    refreshIcon.addEventListener("click", () => {-->
<!--      const rows = Array.from(document.querySelectorAll("#scenario-body tr"));-->
<!--      if (rows.length === 0) {-->
<!--        Swal.fire({ icon: 'info', title: 'No scenarios to refresh' });-->
<!--        return;-->
<!--      }-->

<!--      rows.forEach(row => {-->
<!--        const id = row.getAttribute("data-id");-->
<!--        if (!id) return;-->

<!--        // Spinner already showing, just fetch and replace only if Success-->
<!--        fetch(`/nfserv/run_process_summary/${id}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(summary => {-->
<!--          const testStatus = summary.Testcase_code || "N/A";-->
<!--          const processStatus = summary.status || "N/A";-->

<!--          row.cells[2].textContent = testStatus;-->
<!--          row.cells[3].textContent = processStatus;-->

<!--          if (processStatus.toLowerCase() === "success") {-->
<!--            row.cells[4].textContent = "✅";-->
<!--          } else {-->
<!--            row.cells[4].innerHTML = '<div class="spinner"></div>'; // Keep spinner if not success-->
<!--          }-->
<!--        })-->
<!--        .catch(err => {-->
<!--          console.error("Error:", err);-->
<!--          row.cells[2].textContent = "Error";-->
<!--          row.cells[3].textContent = "Error";-->
<!--          row.cells[4].textContent = "❌";-->
<!--        });-->
<!--      });-->
<!--    });-->
<!--  </script>-->

<!--</body>-->
<!--</html>-->



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Automation Run</title>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #F2F2F2;
      margin: 0;
      padding: 0;
    }

    .main-container {
      width: 95%;
      max-width: 1200px;
      margin: 40px auto;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #333;
    }

    .form-row {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .form-group {
      flex: 1;
      min-width: 220px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #444;
    }

    select {
      width: 100%;
      padding: 10px;
      border: 1px solid #bbb;
      border-radius: 5px;
      font-size: 14px;
    }

    .button-row {
      display: flex;
      gap: 15px;
      justify-content: flex-start;
      margin-top: 20px;
    }

    .btn-run, .btn-refresh {
      padding: 10px 20px;
      font-size: 14px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: white;
    }

    .btn-run { background-color: #28a745; }
    .btn-run:hover { background-color: #218838; }

    .btn-refresh { background-color: #007bff; }
    .btn-refresh:hover { background-color: #0056b3; }

    .table-container {
      display: none;
      margin-top: 40px;
      padding: 20px;
      background-color: #fafafa;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);
    }

    .table-title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #2c3e50;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .refresh-icon {
      cursor: pointer;
      font-size: 18px;
      color: #007bff;
    }

    #scenario-table {
      width: 100%;
      border-collapse: collapse;
      background-color: #fff;
      font-size: 13px;
      table-layout: fixed;
    }

    #scenario-table thead {
      background-color: #f0f0f0;
    }

    #scenario-table th, #scenario-table td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: center;
      word-wrap: break-word;
    }

    .spinner {
      border: 3px solid #ccc;
      border-top: 3px solid #007bff;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      animation: spin 1s linear infinite;
      margin: auto;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

  <div class="main-container">
    <h2>Automation RUN</h2>
    <div class="form-row">
      <div class="form-group">
        <label for="client">Client Name</label>
        <select id="client">
          <option value="" disabled selected>Choose the client</option>
          <option value="NAC">NAC</option>
          <option value="NF">NF</option>
          <option value="KVB">KVB</option>
          <option value="IB">IB</option>
          <option value="WR">WR</option>
        </select>
      </div>

      <div class="form-group">
        <label for="module">Module</label>
        <select id="module">
          <option value="" disabled selected>Select module</option>
          <option value="Login">Login</option>
          <option value="ECF">ECF</option>
          <option value="Vendor">Vendor</option>
        </select>
      </div>

      <div class="form-group">
        <label for="environment">Environment</label>
        <select id="environment">
          <option value="" disabled selected>Select environment</option>
          <option value="DO">DO</option>
          <option value="UAT">UAT</option>
          <option value="SIT">SIT</option>
        </select>
      </div>

      <div class="form-group">
        <label for="testcase">Testcase Code</label>
        <select id="testcase">
          <option value="" disabled selected>Select Testcase Code</option>
        </select>
      </div>
    </div>

    <div class="button-row">
      <button class="btn-run">RUN</button>
      <button class="btn-refresh" onclick="location.reload()">REFRESH</button>
    </div>
  </div>

  <div class="table-container" id="table-container">
    <div class="table-title">
      Scenario Summary <span class="refresh-icon" id="refresh-icon">&#x21bb;</span>
    </div>
    <table id="scenario-table">
      <thead>
        <tr>
          <th>Testcase Code</th>
          <th>Scenario Name</th>
          <th>Test Implement Status</th>
          <th>Process Status</th>
          <th>Loader</th>
        </tr>
      </thead>
      <tbody id="scenario-body"></tbody>
    </table>
  </div>
  <script>
  const clientSelect = document.getElementById("client");
  const moduleSelect = document.getElementById("module");
  const environmentSelect = document.getElementById("environment");
  const testcaseSelect = document.getElementById("testcase");
  const tableContainer = document.getElementById("table-container");
  const tableBody = document.getElementById("scenario-body");
  const refreshIcon = document.getElementById("refresh-icon");
  const runButton = document.querySelector(".btn-run");

  function fetchTestcaseCodes() {
    const client = clientSelect.value;
    const module = moduleSelect.value;
    const env = environmentSelect.value;

    if (client && module && env) {
      fetch(`/nfserv/dropdown_testcase?clientname=${client}&module=${module}&environment=${env}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.json())
      .then(data => {
        testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';
        data.forEach(code => {
          const option = document.createElement("option");
          option.value = code;
          option.textContent = code;
          testcaseSelect.appendChild(option);
        });
      });
    }
  }

  clientSelect.addEventListener("change", fetchTestcaseCodes);
  moduleSelect.addEventListener("change", fetchTestcaseCodes);
  environmentSelect.addEventListener("change", fetchTestcaseCodes);

  testcaseSelect.addEventListener("change", () => {
    const selectedCode = testcaseSelect.value;
    if (selectedCode) {
      fetch(`/nfserv/return_test_scn_name?Testcasecode=${selectedCode}`)
        .then(res => res.json())
        .then(data => {
          tableBody.innerHTML = "";
          const scenarios = data.data || [];

          if (!Array.isArray(scenarios) || scenarios.length === 0) {
            tableBody.innerHTML = `<tr><td colspan="5">No Data</td></tr>`;
            tableContainer.style.display = "block";
            return;
          }

          scenarios.forEach(item => {
            const row = document.createElement("tr");
            row.setAttribute("data-id", item.id);
            row.innerHTML = `
              <td>${item.Testcase_code}</td>
              <td>${item.Test_scnarios}</td>
              <td>${item.status}</td>
              <td>${item.test_implement_status}</td>
              <td></td>
            `;
            tableBody.appendChild(row);
          });

          tableContainer.style.display = "block";
        });
    }
  });

  runButton.addEventListener("click", () => {
    const testcasecode = testcaseSelect.value;
    const client = clientSelect.value;

    if (!testcasecode || !client) {
      Swal.fire({ icon: 'warning', title: 'Please select Testcase & Client' });
      return;
    }

    runButton.disabled = true;
    runButton.textContent = "Running...";
    runButton.style.opacity = 0.6;

    const rowIds = Array.from(document.querySelectorAll("#scenario-body tr"))
      .map(row => row.getAttribute("data-id"))
      .filter(id => id);

    // show spinner
    rowIds.forEach(id => {
      const row = document.querySelector(`tr[data-id="${id}"]`);
      if (row) {
        row.cells[4].innerHTML = '<div class="spinner"></div>';
      }
    });

    // Encode testcase_id as JSON in query params like %5B%22112%22%5D
    const encodedTestcaseId = encodeURIComponent(JSON.stringify(rowIds));
    const queryString = `?testcasecode=${testcasecode}&client=${client}&testcase_id=${encodedTestcaseId}`;

    Swal.fire({
      toast: true,
      position: 'top-end',
      icon: 'success',
      title: 'Automation Starts',
      showConfirmButton: false,
      timer: 2000
    });

    fetch(`/nfserv/automation_runprocess${queryString}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' }
    })
    .then(res => res.json())
    .then(() => {
      document.getElementById("refresh-icon").click();
      runButton.disabled = false;
      runButton.textContent = "RUN";
      runButton.style.opacity = 1;
    })
    .catch(err => {
      console.error("Error:", err);
      Swal.fire({ icon: 'error', title: 'Run failed!' });
      runButton.disabled = false;
      runButton.textContent = "RUN";
      runButton.style.opacity = 1;
    });
  });

  refreshIcon.addEventListener("click", () => {
    const rows = Array.from(document.querySelectorAll("#scenario-body tr"));
    if (rows.length === 0) {
      Swal.fire({ icon: 'info', title: 'No scenarios to refresh' });
      return;
    }

    rows.forEach(row => {
      const id = row.getAttribute("data-id");
      if (!id) return;

      fetch(`/nfserv/run_process_summary/${id}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.json())
      .then(summary => {
        const testStatus = summary.Testcase_code || "N/A";
        const processStatus = summary.status || "N/A";

        row.cells[2].textContent = testStatus;
        row.cells[3].textContent = processStatus;

        if (processStatus.toLowerCase() === "success") {
          row.cells[4].textContent = "✅";
        } else {
          row.cells[4].innerHTML = '<div class="spinner"></div>';
        }
      })
      .catch(err => {
        console.error("Error:", err);
        row.cells[2].textContent = "Error";
        row.cells[3].textContent = "Error";
        row.cells[4].textContent = "❌";
      });
    });
  });
</script>

<!--  <script>-->
<!--    const clientSelect = document.getElementById("client");-->
<!--    const moduleSelect = document.getElementById("module");-->
<!--    const environmentSelect = document.getElementById("environment");-->
<!--    const testcaseSelect = document.getElementById("testcase");-->
<!--    const tableContainer = document.getElementById("table-container");-->
<!--    const tableBody = document.getElementById("scenario-body");-->
<!--    const refreshIcon = document.getElementById("refresh-icon");-->
<!--    const runButton = document.querySelector(".btn-run");-->

<!--    function fetchTestcaseCodes() {-->
<!--      const client = clientSelect.value;-->
<!--      const module = moduleSelect.value;-->
<!--      const env = environmentSelect.value;-->

<!--      if (client && module && env) {-->
<!--        fetch(`/nfserv/dropdown_testcase?clientname=${client}&module=${module}&environment=${env}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          testcaseSelect.innerHTML = '<option value="" disabled selected>Select Testcase Code</option>';-->
<!--          data.forEach(code => {-->
<!--            const option = document.createElement("option");-->
<!--            option.value = code;-->
<!--            option.textContent = code;-->
<!--            testcaseSelect.appendChild(option);-->
<!--          });-->
<!--        });-->
<!--      }-->
<!--    }-->

<!--    clientSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    moduleSelect.addEventListener("change", fetchTestcaseCodes);-->
<!--    environmentSelect.addEventListener("change", fetchTestcaseCodes);-->

<!--    testcaseSelect.addEventListener("change", () => {-->
<!--      const selectedCode = testcaseSelect.value;-->
<!--      if (selectedCode) {-->
<!--        fetch(`/nfserv/return_test_scn_name?Testcasecode=${selectedCode}`)-->
<!--          .then(res => res.json())-->
<!--          .then(data => {-->
<!--            tableBody.innerHTML = "";-->
<!--            const scenarios = data.data || [];-->

<!--            if (!Array.isArray(scenarios) || scenarios.length === 0) {-->
<!--              tableBody.innerHTML = `<tr><td colspan="5">No Data</td></tr>`;-->
<!--              tableContainer.style.display = "block";-->
<!--              return;-->
<!--            }-->

<!--            scenarios.forEach(item => {-->
<!--              const row = document.createElement("tr");-->
<!--              row.setAttribute("data-id", item.id);-->
<!--              row.innerHTML = `-->
<!--                <td>${item.Testcase_code}</td>-->
<!--                <td>${item.Test_scnarios}</td>-->
<!--                <td>${item.status}</td>-->
<!--                <td>${item.test_implement_status}</td>-->
<!--                <td></td>-->
<!--              `;-->
<!--              tableBody.appendChild(row);-->
<!--            });-->

<!--            tableContainer.style.display = "block";-->
<!--          });-->
<!--      }-->
<!--    });-->

<!--    runButton.addEventListener("click", () => {-->
<!--      const testcasecode = testcaseSelect.value;-->
<!--      const client = clientSelect.value;-->

<!--      if (!testcasecode || !client) {-->
<!--        Swal.fire({ icon: 'warning', title: 'Please select Testcase & Client' });-->
<!--        return;-->
<!--      }-->

<!--      runButton.disabled = true;-->
<!--      runButton.textContent = "Running...";-->
<!--      runButton.style.opacity = 0.6;-->

<!--      const rowIds = Array.from(document.querySelectorAll("#scenario-body tr"))-->
<!--        .map(row => row.getAttribute("data-id"))-->
<!--        .filter(id => id);-->

<!--      // Show spinner only now-->
<!--      rowIds.forEach(id => {-->
<!--        const row = document.querySelector(`tr[data-id="${id}"]`);-->
<!--        if (row) {-->
<!--          row.cells[4].innerHTML = '<div class="spinner"></div>';-->
<!--        }-->
<!--      });-->

<!--      const queryParams = new URLSearchParams({-->
<!--        Testcasecode: testcasecode,-->
<!--        clientname: client,-->
<!--        testcase_id: JSON.stringify(rowIds)-->
<!--      });-->

<!--      Swal.fire({-->
<!--        toast: true,-->
<!--        position: 'top-end',-->
<!--        icon: 'success',-->
<!--        title: 'Automation Starts',-->
<!--        showConfirmButton: false,-->
<!--        timer: 2000-->
<!--      });-->

<!--      fetch(`/nfserv/automation_runprocess?${queryParams.toString()}`, {-->
<!--        method: 'POST',-->
<!--        headers: { 'Content-Type': 'application/json' }-->
<!--      })-->
<!--      .then(res => res.json())-->
<!--      .then(() => {-->
<!--        document.getElementById("refresh-icon").click();-->
<!--      });-->
<!--    });-->

<!--    refreshIcon.addEventListener("click", () => {-->
<!--      const rows = Array.from(document.querySelectorAll("#scenario-body tr"));-->
<!--      if (rows.length === 0) {-->
<!--        Swal.fire({ icon: 'info', title: 'No scenarios to refresh' });-->
<!--        return;-->
<!--      }-->

<!--      rows.forEach(row => {-->
<!--        const id = row.getAttribute("data-id");-->
<!--        if (!id) return;-->

<!--        fetch(`/nfserv/run_process_summary/${id}`, {-->
<!--          method: 'POST',-->
<!--          headers: { 'Content-Type': 'application/json' }-->
<!--        })-->
<!--        .then(res => res.json())-->
<!--        .then(summary => {-->
<!--          const testStatus = summary.Testcase_code || "N/A";-->
<!--          const processStatus = summary.status || "N/A";-->

<!--          row.cells[2].textContent = testStatus;-->
<!--          row.cells[3].textContent = processStatus;-->

<!--          if (processStatus.toLowerCase() === "success") {-->
<!--            row.cells[4].textContent = "✅";-->
<!--          } else {-->
<!--            row.cells[4].innerHTML = '<div class="spinner"></div>';-->
<!--          }-->
<!--        })-->
<!--        .catch(err => {-->
<!--          console.error("Error:", err);-->
<!--          row.cells[2].textContent = "Error";-->
<!--          row.cells[3].textContent = "Error";-->
<!--          row.cells[4].textContent = "❌";-->
<!--        });-->
<!--      });-->
<!--    });-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->

